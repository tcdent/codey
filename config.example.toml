# Codey Configuration Example
# Copy this file to: ~/.config/codey/config.toml

[general]
# Default model to use
model = "claude-sonnet-4-20250514"

# Working directory (default: current directory)
# working_dir = "/path/to/project"

# Maximum tokens for responses
max_tokens = 8192

[auth]
# Authentication method: "oauth" or "api_key"
method = "oauth"

# API key (only if method = "api_key")
# api_key = "sk-ant-..."
#
# Or set the ANTHROPIC_API_KEY environment variable

[ui]
# Syntax highlighting theme
# Available: base16-ocean.dark, base16-ocean.light, InspiredGitHub, Solarized (dark), Solarized (light)
theme = "base16-ocean.dark"

# Enable auto-scroll when new content arrives
auto_scroll = true

# Show token usage in status bar
show_tokens = true

[tools]
# Tools to enable (leave empty for all)
enabled = ["read_file", "write_file", "edit_file", "shell", "fetch_url"]

# Tool parameter filters for auto-approve/auto-deny
# Evaluation order:
#   1. If any deny pattern matches → auto-deny (blocked)
#   2. If any allow pattern matches → auto-approve (no prompt)
#   3. Otherwise → prompt user for approval

# Shell command filters (matches against 'command' parameter)
[tools.shell]
allow = [
    "^ls\\b",           # ls commands
    "^find\\b",         # find commands
    "^cat\\b",          # cat commands
    "^head\\b",         # head commands
    "^tail\\b",         # tail commands
    "^grep\\b",         # grep commands
    "^rg\\b",           # ripgrep commands
    "^wc\\b",           # wc commands
    "^pwd$",            # pwd command
    "^echo\\b",         # echo commands
]
deny = [
    "rm\\s+-rf\\s+/",   # dangerous rm
    "sudo\\s+rm",       # sudo rm
    ":(){ :|:& };:",    # fork bomb
    "\\|\\s*sh\\b",     # piping to shell
    "\\|\\s*bash\\b",   # piping to bash
    "curl.*\\|",        # curl piped to anything
    "wget.*\\|",        # wget piped to anything
]

# Read file filters (matches against 'path' parameter)
[tools.read_file]
allow = [
    "\\.(rs|toml|md|txt|json|yaml|yml|ts|js|py|go|c|h|cpp|hpp)$",  # Common code files
]
deny = [
    "\\.env$",          # Environment files
    "secrets?",         # Secret files
    "\\.pem$",          # Private keys
    "\\.key$",          # Key files
]

# Write file filters (matches against 'path' parameter)
[tools.write_file]
allow = []
deny = [
    "\\.env$",          # Environment files
    "\\.pem$",          # Private keys
    "\\.key$",          # Key files
]

# Edit file filters (matches against 'path' parameter)
[tools.edit_file]
allow = []
deny = [
    "\\.env$",          # Environment files
    "\\.pem$",          # Private keys
]

# URL fetch filters (matches against 'url' parameter)
[tools.fetch_url]
allow = [
    "^https://",        # Only HTTPS
]
deny = [
    "localhost",        # No local requests
    "127\\.0\\.0\\.1",  # No loopback
    "192\\.168\\.",     # No private networks
    "10\\.",            # No private networks
    "172\\.(1[6-9]|2[0-9]|3[01])\\.",  # No private networks
]
